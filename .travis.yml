language: rust

env:
  global:
    - PROJECT_NAME=wedder
notifications:
  email: false

matrix:
  include:
    - os: linux
      rust: stable
      env: TARGET=x86_64-unknown-linux-gnu

install:
  - rustup component add clippy
script:
  - make

before_deploy:
  - make ci
deploy:
  provider: releases
  api_key:
    secure: WHpAh2ILMavnRtc8kk3LGMUU83cmKszqfyF/lE9emFBfSi2ScuOk2XKb2+DMQUz0KiF3+7pb/AmW+8TjSxTG/apD63YUKeGFwe+Qo5il2O8VuCUmsj8iDHVBgKZ13x3kAfi3K21z5UPDbxSrPVxw9e+XsVUt0dYrqLKPGMcxiIPMDrSBhmcpdlXGjCVpUVkA2UELhsPMJrKZGY5/LHcK4nQEy/CQmTIJVeW4/cauhGylRcFeGXw4Qh7XCQ96IkQjQDsAJbciKysvy15R1e93PmH5HWkTnJy0Juo9ydMeDIZai1yW8QLRanRUoGQUvc1wsbUZkmQXpqxvE1ACul76wUCKnC5mue2VpveDqqNRcrt/GvAriu6U6T5+UMRiH/MiBefySYn85V+qaSNf1UaFWvWQ6ZL4RNbO6JBS3rCE0a0XVMRw3JFDWsBuSQZw4RhE2mYYkbAi2RLNH+wdG/C8fH7Sd9IucrSOXpyYeuu20stRWxapJEP4k2MGqFFgLF3w0tf8l+HTpy2SRHiC+US4jJZoAVqZwk2821aOAm6VmEtu5xHmnTgKxaDBlL7/PHqCF/0Uf/mvHXG3k4XWXLj7sZiGS1zMfg4mUSsmTMizs3u/SoWJwmYCfPMxTlKO8jSZw1i1PdTVkvvAIT2tv1o3gerfVXcVdt2BYE6KYCS5tlk=
  skip_cleanup: true
  file: $PROJECT_NAME-$TRAVIS_TAG-$TARGET
  on:
    tags: true
